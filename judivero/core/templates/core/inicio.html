<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Añadir Font Awesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <nav class="bg-gradient-to-r from-indigo-500 to-purple-600 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <a href="{% url 'inicio' %}" class="text-white text-2xl font-bold">Comandos</a>
            <a href="{% url 'notas' %}" class="text-white text-2xl font-bold">Notas</a>
        </div>
    </nav>
    <div class="max-w-5xl mx-auto p-6">
        <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">Comandos</h1>
        <div class="overflow-x-auto rounded-xl shadow-lg bg-white border border-gray-200">
            <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white">
                    <tr>
                        <th class="px-6 py-4 text-left text-sm font-semibold tracking-wide">Nombre Comando</th>
                        <th class="px-6 py-4 text-left text-sm font-semibold tracking-wide">Juego o Significado</th>
                        <th class="px-6 py-4 text-left text-sm font-semibold tracking-wide">Nivel Mínimo</th>
                    </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-100">
                    {% for comando in comandos %}
                    <tr class="hover:bg-gray-50 transition-colors duration-200">
                        <td class="px-6 py-4 text-gray-900 font-medium flex items-center">
                            <span>{{ comando.nombre }}</span>
                            <button onclick="copiarTexto(this)" class="ml-2 p-1 text-gray-500 hover:text-blue-500 transition-colors" title="Copiar comando">
                                <i class="far fa-copy"></i>
                            </button>
                        </td>
                        <td class="px-6 py-4 text-gray-700">{{ comando.juego_o_significado }}</td>
                        <td class="px-6 py-4">
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium
                                {% if comando.nivel_minimo <= 1 %}
                                    bg-green-100 text-green-800
                                {% elif comando.nivel_minimo <= 3 %}
                                    bg-yellow-100 text-yellow-800
                                {% else %}
                                    bg-red-100 text-red-800
                                {% endif %}
                            ">
                                Nivel {{ comando.nivel_minimo }}
                            </span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function copiarTexto(boton) {
            // Obtener el texto del comando (el span anterior al botón)
            const texto = boton.previousElementSibling.textContent;
            
            // Usar la API del portapapeles
            navigator.clipboard.writeText(texto).then(() => {
                // Cambiar temporalmente el icono para mostrar éxito
                const icono = boton.querySelector('i');
                icono.className = 'fas fa-check text-green-500';
                
                // Restaurar el icono después de 2 segundos
                setTimeout(() => {
                    icono.className = 'far fa-copy';
                }, 2000);
            }).catch(err => {
                console.error('Error al copiar: ', err);
                // Fallback para navegadores antiguos
                const areaTemporal = document.createElement('textarea');
                areaTemporal.value = texto;
                document.body.appendChild(areaTemporal);
                areaTemporal.select();
                document.execCommand('copy');
                document.body.removeChild(areaTemporal);
                
                // Mostrar éxito incluso con fallback
                const icono = boton.querySelector('i');
                icono.className = 'fas fa-check text-green-500';
                setTimeout(() => {
                    icono.className = 'far fa-copy';
                }, 2000);
            });
        }
    </script>
</body>
</html>